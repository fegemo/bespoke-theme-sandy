.layout-title.bespoke-slide
  display flex
  justify-content space-between
  h1
    flex 0.65
    margin 0
    padding 0.25em
    width 100%
    display flex
    align-items flex-end
    color white
    text-align left
    text-shadow 0.025em 0.025em black
    &::before
      content ""
      position absolute
      left 0
      right 0
      top 0
      bottom 35%
      background-size cover
      background-position 50% 100%
      z-index -1
  h2
    flex 0.25
    box-sizing content-box
    width 100%
    padding 0.25em
    text-align right
    color black


.layout-section-header.bespoke-slide
  display flex
  flex-direction column
  flex-wrap wrap
  align-items flex-start
  &::before, &::after
    content ""
    position absolute
    top 0
    bottom 0
    width 50%
    z-index -1
  &::before
    left 0
    box-shadow 10px 0 10px #0003
    z-index 0
  &::after
    right 0
    background-color white
    background-size cover
  h1 + *:not(h2),
  h1 + h2 ~ :not(.content)
    flex: 1
  .content
    height 100%
    display flex
    flex-direction column
    justify-content center
    box-sizing border-box
    color white
    text-shadow 0.05em 0.05em black
    strong
      color lighten($accent-color, 50%)
    & > img
      width max-content
      height max-content
      justify-self center
      align-self center
    p
      display inline
      &::after
        content " "
        display block
        margin-bottom 0.5em
    li
      display inline
      &::before
        content " "
        display list-item
        float left
      &::after
        content " "
        display block
  & > *
    width 50%
    padding 0 1em
  & > ul, & > ol
    padding-left 2em
  h1, h2
    margin 0
    padding 0.25em
    text-align left
  h1
    flex 0.25
    font-weight bold
  h2
    flex 0.75
    color inherit


regular-slide()
  display flex
  justify-content flex-start
  align-items flex-start
  padding 1.5rem
  & > h1, & > h2
    font-size 2em


.layout-regular.bespoke-slide
  regular-slide()
  h1, h2, h3, h4, h5, h6
    margin 0 0 0.75em
    padding 0


.layout-stripe.bespoke-slide
  regular-slide()
  & .stripe
    width 100%
    height 3em
    object-fit contain
    // background-image url(attr(stripe))
    background-size 5em
    background-repeat repeat-x
    margin-bottom 2em
  h1, h2, h3, h4, h5, h6
    align-self center
    + p
      width 100%


.layout-2-column-content.bespoke-slide
  regular-slide()
  flex-wrap wrap
  flex-direction row
  h1, h2, h3, h4, h5, h6
    flex-basis 100%
  & > * + *
    width 49%
    margin-left 1%
    margin-right 0
    &::last-child
      margin-left 0


.layout-centered-horizontal.bespoke-slide
  regular-slide()
  align-items center


.layout-regular-horizontal.bespoke-slide
  regular-slide()
  flex-direction row

.layout-regular-block.bespoke-slide
  regular-slide()
  display block

.layout-2-column-content-zigzag.bespoke-slide
  regular-slide()
  flex-direction row
  flex-wrap wrap
  align-items flex-start
  h1, h2
    width 100%
  & > *:not(:first-child)
    width 48%


.layout-2-column-content-result.bespoke-slide
  regular-slide()
  display flex
  flex-direction column
  flex-wrap wrap
  align-items flex-end
  & > *
    width 48%


[class*="layout-2-column-content-"]
  regular-slide()
  flex-direction row
  flex-wrap wrap
  align-items flex-start
  & > *:first-child
    width 100%
    align-self flex-end
  & > pre
    max-height calc(100% - 0.25em - 1.5em - 24px - 4em)


.layout-2-column-highlight-and-list
  regular-slide()
  flex-wrap wrap
  flex-direction row
  perspective 900px
  h1, h2, h3, h4, h5, h6
    flex-basis 100%
  // a figure/image/p à esquerda, em destaque
  & > *:nth-child(2)
    width 30%
    box-shadow 20px 20px 20px rgba(black, .2)
    transition all 500ms ease 400ms
    opacity .5
    transform scale(.75)
    transform-origin right
    margin-top 1em
    & > img
      max-width 100%
      max-height @max-width
  &.bespoke-active
    & > *:nth-child(2)
      transform rotateY(30deg) scale(1)
      opacity 1
  // o que estiver logo após a figure/image/p em destaque
  & > * + *
    width 60%
    margin-left 1%
    margin-right 0
    &::last-child
      margin-left 0

.layout-3-column-element-with-titles-expansible
  display flex
  flex-direction column
  flex-wrap wrap
  align-items flex-start
  & > *
    width calc(33% - 1rem)
  h1, h2, h3, h4, h5, h6
    margin auto 0
    &:not(:last-of-type)
      margin-right 1rem
  & > *:nth-child(2n)
    height calc(100% - 2.5em)
    margin 0
    transition all 100ms ease
    position relative
    &:not(:last-of-type)
      margin-right 1rem
    &:hover
      left 0
      width 100%
      z-index 1
    &:nth-of-type(2)
      transition-duration 50ms
      &:hover
        left -33%
    &:nth-of-type(3)
      transition none
      &:hover
        left -67%


.layout-main-point.bespoke-slide
  background-image linear-gradient(to right bottom, $emphatic-color, darken($emphatic-color, 45%))
  h1, h2, h3, h4, h5, h6
    color white


$balloon-size = 200px
$balloon-radius = 180px
$image-size = 125px
.layout-circling-balloons
  h1, h2, h3, h4, h5, h6
    z-index 1

  // the ul occupies the whole slide
  & > ul
    position absolute
    left 0
    top 0
    width 100%
    height 100%
    margin 0

  // list items are the balloons
  & > ul > li
    position absolute
    width $balloon-size
    height @width
    left "calc(50% - %s)" % (@width/2)
    top "calc(50% - %s)" % (@height/2)
    padding 0
    margin 0
    border-radius 50%
    background gold
    overflow hidden
    list-style-type none
    transition all 250ms ease
    animation circling 36s linear 0s infinite

    for i in (1..3)
      &:nth-of-type({i})
        animation-delay "%ss" % (-(i - 1)*12)

    // first child of a li is a p that contains an img
    & > p:first-child,
    & > img:first-child
      position absolute
      top 0
      right 0
      bottom 0
      left 0
      margin 0
      transition all 250ms ease

      img
        display block
        width $image-size
        height @width
        margin (($balloon-size - @height)/2) auto

    & > img:first-child
      display block
      width $image-size
      height @width
      margin (($balloon-size - @height)/2) auto

    // second child of a li is a list (ul, ol, dl)
    & > :nth-child(2)
      margin-top $balloon-size
      padding 1em

    // when the li is hovered, it should expand
    &:hover
      width 26em
      height 10em
      top "calc(50% - %s)" % (@height/2)
      left "calc(50% - %s)" % (@width/2)
      border-radius 2em
      overflow visible
      z-index 2

      // the li's first child (p) should move to top
      & > :first-child
        transform translateY(-50%)

      // the list (ul, ol, dl) should have just a small margin top
      & > :nth-child(2)
        margin-top 1em

  // when the ul is hovered, the circling animation pauses
  & > ul:hover > li
    animation-play-state paused


@keyframes circling
  from
    transform rotate(0turn) translate($balloon-radius) rotate(0turn)
  to
    transform rotate(1turn) translate($balloon-radius) rotate(-1turn)

.layout-tall-figure-right,
.layout-tall-figure-left
  regular-slide()
  flex-wrap wrap
  flex-direction row
  h1, h2, h3, h4, h5, h6
    flex-basis 100%
  // a figure/image/p à direita
  & > :nth-child(2)
    flex-basis 30%
    & > img
      max-width 100%
      max-height @max-width
  & > :nth-child(3)
    flex-basis 70%

.layout-tall-figure-right
  & > :nth-child(2)
    order 2
  & > :nth-child(3)
    order 1

.layout-tall-figure-left
  & > :nth-child(2)
    order 1
  & > :nth-child(3)
    order 2

.show-active-slide-and-previous
  .bespoke-before-1
    transform translate3d(-30%, 0, -250px) rotateY(10deg)
    opacity 1
  .bespoke-active
    transform translate3d(30%, 0, -250px) rotateY(-10deg)

[data-bespoke-state=show-active-slide-and-previous]
  &.bespoke-before-1
    transform translate3d(-30%, 0, -250px) rotateY(10deg)
    opacity 0
